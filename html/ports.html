<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hwlib: Ports</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="hwlib_icon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hwlib
   </div>
   <div id="projectbrief">C++ OO-style close-to-the-hardware library</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ports.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Ports </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A port is a collection of up to 8 <a class="el" href="pins.html">pins</a> of the same type (in, out, in_out or oc) that are used (read, written, direction changed) together.</p>
<p><br />
 </p><hr/>
<h1><a class="anchor" id="port-types"></a>
types</h1>
<p>Similar to <a class="el" href="pins.html">pins</a>, there are four (abstract) types of ports:</p>
<ul>
<li>a hwlib::port_in can only be used for input (read)</li>
<li>a hwlib::port_out can only be used for output (write)</li>
<li>a hwlib::port_in_out can be used for input or output, but it must be configured for the appropriate direction (input or output) before it is used in either way.</li>
<li>a hwlib::port_oc (open collector) can be used for input or output (without configuring it for a direction), but each pin in the port must have been written high before it can be meaningfully read.</li>
</ul>
<p><br />
 </p><hr/>
<h1><a class="anchor" id="port-from"></a>
creating a port from pins</h1>
<p>A port can be constructed from a list of (up to 8) pins of the same type by the hwlib::port_from() constructor functions.</p>
<div class="fragment"></div><!-- fragment --><p> <br />
 </p><hr/>
<h1><a class="anchor" id="port-operation"></a>
operations</h1>
<p>The next tables shows the operations that are available for each type of port.</p>
<table class="doxtable">
<tr>
<th>port type </th><th>reading </th><th>writing </th><th>direction control  </th></tr>
<tr>
<td>in </td><td>refresh(), read() </td><td></td><td></td></tr>
<tr>
<td>out </td><td></td><td>write(), write() </td><td></td></tr>
<tr>
<td>in_out </td><td>refresh(), read() </td><td>write(), write() </td><td>direction_set_input(), direction_set_output(), direction_flush() </td></tr>
<tr>
<td>oc </td><td>refresh(), read() </td><td>write(), write() </td><td></td></tr>
</table>
<p>A read() returns a uint_fast8_t, a write() accepts a uint_fast8_t. The other calls take no parameters and return void.</p>
<p>When a port is read from, the lowest bit of the value read was read from the first pin supplied to the port constructor, the second-lowest bit from the second pin, etc. Likewise, when a port is written to, the lowest bit of the value is written to the first pin supplied to the constructor, etc.</p>
<div class="fragment"></div><!-- fragment --><div class="fragment"></div><!-- fragment --><p> For an in_out port the direction must be set to input before a read() is done, and to output before a write() is done.</p>
<div class="fragment"></div><!-- fragment --><p> As shown in the examples, a read() should be preceded by a refresh(), a write should be followed by a flush(), and a direction change should be followed by a direction_flush(), as explained in the page on <a class="el" href="buffering.html">buffering</a>.</p>
<p><br />
 </p><hr/>
<h1><a class="anchor" id="port-direct"></a>
direct</h1>
<p>Port operations (read, write, direction_set_input, direction_set_output) are (potentially) <a class="el" href="buffering.html">buffered</a>.</p>
<p>The direct() creator function can be used to create a port that has read(), write() and direction_set_*() operations with direct effect.</p>
<div class="fragment"></div><!-- fragment --><p> <br />
 </p><hr/>
<h1><a class="anchor" id="port-invert"></a>
invert</h1>
<p>The hwlib::invert invert() function constructs a new port from an existing one. When a value is written to this new port, the bitwise inverse of this value is written to the old pin. Likewise, when a value is read from the new port, the value is the bitwise inverse of the value read from the old port. The new port is of the same type (in, out, in_out, oc) as the existing one from which it was created.</p>
<div class="fragment"></div><!-- fragment --><p> <br />
 </p><hr/>
<h1><a class="anchor" id="port-conversion"></a>
conversion</h1>
<p>Conversion functions are available that create a port of one type from one of another type. Of course, not all such conversions are possible.</p>
<table class="doxtable">
<tr>
<th>function </th><th>accepted port types  </th></tr>
<tr>
<td>port_in_from( port ) </td><td>in, in_out, oc </td></tr>
<tr>
<td>port_out_from( port ) </td><td>out, in_out, oc </td></tr>
<tr>
<td>port_in_out_from( port ) </td><td>in_out, oc </td></tr>
<tr>
<td>port_oc_from( port ) </td><td>oc </td></tr>
</table>
<p>Unlike for the pin conversions, it is not possible to create a port_oc from a port_in_out, because a port_in_out doesn't allow for individual control of the pin directions.</p>
<p><br />
</p>
<div class="fragment"></div><!-- fragment --><p> <br />
 </p><hr/>
<h1><a class="anchor" id="port-all"></a>
All</h1>
<p>The overloaded all() function creates a single out pin from an out port. Writing a value to the single pin writes the value to all pins of the port. Flushing the single pin flushes the port.</p>
<p><br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jul 1 2019 16:30:59 for hwlib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
